RPI_REMOTE_TOOLS_PATH := "rpi_remote_tools"
RPI_REMOTE_TOOLS_MODULE := "rpi_remote"

# Executing "just" without arguments is listing all recipes
list-recipes:
    @just --list --unsorted

# Install necessary system applications on Raspberry Pi device
install configurations="{}":
    @just _rpi --rpi-install '{{configurations}}'

# Uninstall from Raspberry Pi device
uninstall configurations="{}":
    @just _rpi --rpi-uninstall '{{configurations}}'

# Copying application to Raspberry Pi device
sync configurations="{}":
    @just _rpi --rpi-upload-code '{{configurations}}'

# Checking about application is already running on Raspberry Pi device.
check configurations="{}":
    @just _rpi --rpi-check '{{configurations}}'

# Stops running application on Raspberry Pi device (do not use when service is running)
stop-app configurations="{}":
    @just _rpi --rpi-stop-app '{{configurations}}'

# Removing service and stopping application on Raspberry Pi device
stop configurations="{}":
    @just _rpi --rpi-stop '{{configurations}}'

# Restarting application service on Raspberry Pi device
restart configurations="{}":
    @just _rpi --rpi-restart '{{configurations}}'

# Starting application in a tmux session on Raspberry Pi device (first it will kill already running app) 
run configurations="{}":
    @just _rpi --rpi-run-app-in-tmux '{{configurations}}'

# Live stream from Raspberry Pi device tmux session
tmux configurations="{}":
    @just _rpi --rpi-tmux '{{configurations}}'

_rpi command configurations:
    @uv run --quiet --project {{RPI_REMOTE_TOOLS_PATH}} \
        python -m {{RPI_REMOTE_TOOLS_PATH}}.{{RPI_REMOTE_TOOLS_MODULE}} {{command}} \
        --configurations '{{configurations}}'

